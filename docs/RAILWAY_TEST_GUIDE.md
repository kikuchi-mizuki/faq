# Railway認証システムテストガイド

## 🚀 Railwayデプロイ完了

修正版がRailwayにデプロイされました。以下の手順で認証システムをテストしてください。

## 📱 テスト手順

### **STEP1: 基本的な認証フローテスト**

1. **LINE Botに「認証」と入力**
   - 期待される結果: 「店舗コードを入力してください」メッセージが表示される

2. **「STORE004」と入力**
   - 期待される結果: 「店舗「池袋店」を確認しました。社員番号を入力してください」メッセージが表示される

3. **「004」と入力**
   - 期待される結果: 「認証が完了しました！」メッセージが表示される

### **STEP2: エラーケースのテスト**

1. **無効な店舗コードのテスト**
   - 「STORE999」と入力
   - 期待される結果: エラーメッセージが表示される

2. **無効な社員番号のテスト**
   - 「STORE004」→「999」と入力
   - 期待される結果: エラーメッセージが表示される

### **STEP3: 複数ユーザーのテスト**

異なるLINEアカウントで同様のテストを実行してください。

## 🔍 期待される結果

### **✅ 正常な動作**
- 認証フローが順次進行する
- 店舗コードと社員番号が正しく認識される
- 認証完了メッセージが表示される
- 認証後にBotが正常に利用できる

### **❌ 問題が発生した場合**
- 認証フローがループする
- 店舗コードが認識されない
- 社員番号入力後に認証がリセットされる
- エラーメッセージが表示される

## 🛠️ 問題が発生した場合の対処

### **問題1: 認証フローがループする**
- 原因: 状態管理の問題
- 対処: 認証フローのロジックを再確認

### **問題2: 店舗コードが認識されない**
- 原因: StoreServiceの初期化問題
- 対処: Google Sheets APIの認証を確認

### **問題3: 社員番号入力後に認証がリセットされる**
- 原因: 認証完了処理の問題
- 対処: 認証情報の保存処理を確認

## 📊 テスト結果の記録

テスト結果を以下の形式で記録してください：

```
テスト日時: [日時]
テストユーザー: [ユーザーID]
結果: [成功/失敗]
問題: [発生した問題の詳細]
```

## 🎯 次のステップ

テストが成功した場合：
- 本格運用の準備
- 追加機能の実装

テストが失敗した場合：
- 問題の特定と修正
- 追加のデバッグとテスト
