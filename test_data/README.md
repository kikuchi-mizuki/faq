# サンプルファイル一覧

このディレクトリには、RAGシステムのテスト用サンプルファイルが含まれています。

## 📁 ファイル一覧

### テキストファイル (.txt)

| ファイル名 | サイズ | 内容 | 用途 |
|-----------|--------|------|------|
| `sample_product_catalog.txt` | 1.2KB | 製品カタログ2026年版 | 製品情報の検索テスト |
| `sample_store_info.txt` | 1.2KB | 店舗情報・アクセス・お問い合わせ | 店舗情報の検索テスト |
| `sample_warranty_policy.txt` | 1.7KB | 保証・アフターサービスについて | 保証情報の検索テスト |

### Excelファイル (.xlsx)

| ファイル名 | サイズ | 内容 | シート数 | 用途 |
|-----------|--------|------|---------|------|
| `sample_inventory_orders.xlsx` | 7.6KB | 在庫管理・注文履歴 | 3シート | 構造化データの検索テスト |
| `sample_faq_list.xlsx` | 6.2KB | よくある質問（FAQ）一覧 | 1シート | FAQ検索テスト |

**Excelファイルの詳細**:

`sample_inventory_orders.xlsx`:
- シート1「在庫管理」: 商品コード、商品名、在庫数、価格など
- シート2「注文履歴」: 注文番号、顧客名、配送状況など
- シート3「売上統計」: 月次売上、注文件数、前月比など

`sample_faq_list.xlsx`:
- シート1「FAQ一覧」: カテゴリ別のよくある質問と回答（配送、支払い、返品、会員特典）

### PDFファイル (.pdf)

| ファイル名 | サイズ | 内容 | ページ数 | 用途 |
|-----------|--------|------|---------|------|
| `sample_user_manual.pdf` | 8.2KB | スマートウォッチ Pro X1 ユーザーマニュアル | 5ページ | PDF解析テスト |

**PDFファイルの内容**:
1. はじめに（同梱物、安全上のご注意）
2. 製品仕様（基本仕様、バッテリー、センサー、接続）
3. 初期設定（充電、アプリインストール、ペアリング）
4. 基本操作（画面操作、ボタン操作、主な機能）
5. トラブルシューティング（よくある問題と解決策）

---

## 🚀 使用方法

### 1. 一括アップロード（推奨）

プロジェクトルートディレクトリで以下のコマンドを実行：

```bash
./upload_sample_files.sh
```

このスクリプトは以下を自動実行します：
- 全6ファイルをRailway環境のRAGシステムにアップロード
- 各ファイルに適切なタイトルを設定
- アップロード結果をJSON形式で表示

### 2. 個別アップロード

特定のファイルのみアップロードする場合：

**テキストファイル**:
```bash
curl -X POST "https://line-qa-system-production.up.railway.app/upload-document" \
  -F "file=@test_data/sample_product_catalog.txt" \
  -F "title=製品カタログ 2026年版"
```

**Excelファイル**:
```bash
curl -X POST "https://line-qa-system-production.up.railway.app/upload-document" \
  -F "file=@test_data/sample_faq_list.xlsx" \
  -F "title=よくある質問（FAQ）一覧"
```

**PDFファイル**:
```bash
curl -X POST "https://line-qa-system-production.up.railway.app/upload-document" \
  -F "file=@test_data/sample_user_manual.pdf" \
  -F "title=スマートウォッチ Pro X1 ユーザーマニュアル"
```

### 3. Webインターフェースからアップロード

1. ブラウザで https://line-qa-system-production.up.railway.app/upload にアクセス
2. 「ファイルアップロード」タブを開く
3. ファイルをドラッグ&ドロップまたは選択してアップロード

---

## ✅ テスト方法

### ステップ1: ファイルをアップロード

```bash
cd /Users/kikuchimizuki/Desktop/aicollections_2/faq
./upload_sample_files.sh
```

### ステップ2: アップロード確認

Webインターフェースで確認：
https://line-qa-system-production.up.railway.app/upload
→ 「ファイル一覧」タブで6ファイルがアップロードされていることを確認

### ステップ3: LINEボットでテスト

`TEST_QUESTIONS.md` に記載された質問をLINEで送信して、正確な回答が返ってくるか確認：

**簡単なテスト（5問）**:
1. 「スマートウォッチの価格は？」→ 29,800円
2. 「渋谷店の営業時間は？」→ 10:00〜20:00
3. 「保証期間は何年ですか？」→ 1年間（延長で最大3年）
4. 「配送料はいくらですか？」→ 全国一律800円（5,000円以上で無料）
5. 「ペアリングできないのですが」→ ペアリング方法の説明

**詳細なテスト（33問）**:
`TEST_QUESTIONS.md` を参照してください。

---

## 📊 期待される結果

### RAG検索の動作確認

アップロード後、以下が期待されます：

1. **テキストファイル**: そのまま全文がRAGに追加される
2. **Excelファイル**: 各シートがテキスト化されてRAGに追加される
   - ヘッダー行と各データ行が構造化された形式で保存
   - 最大10シート、各シート100行まで処理
3. **PDFファイル**: 各ページがテキスト抽出されてRAGに追加される
   - ページ番号付きで保存

### 検索精度の確認

- 質問に対する類似度スコア: **0.3以上**が望ましい
- 検索結果の順位: **TOP5以内**に関連文書が含まれることを確認
- 回答の正確性: 質問に対して正しい情報が含まれているか確認

---

## 🔧 トラブルシューティング

### アップロードエラー

**問題**: `ファイルサイズが大きすぎます`
- **原因**: ファイルが5MBを超えている
- **解決策**: ファイルを分割するか、不要なシート/ページを削除

**問題**: `レート制限超過`
- **原因**: 1時間に10回以上アップロードしている
- **解決策**: 1時間待ってから再試行

### 検索結果が不正確

**問題**: 関連する文書が検索されない
- **確認1**: ファイル一覧でファイルが正しくアップロードされているか確認
- **確認2**: RAG診断エンドポイントで文書数を確認
  ```bash
  curl 'https://line-qa-system-production.up.railway.app/healthz?debug=true'
  ```
- **解決策**: ファイルを再アップロードするか、より具体的な質問をする

**問題**: 回答に含まれる情報が古い
- **原因**: 以前にアップロードした同じタイトルの文書が残っている
- **解決策**: 古い文書を削除してから新しい文書をアップロード

---

## 📝 ファイル作成の経緯

これらのサンプルファイルは、以下の目的で作成されました：

1. **対応形式の実証**: テキスト、Excel、PDF の3形式すべてに対応
2. **実用的なコンテンツ**: 実際のECサイトで使われそうな情報を含む
3. **多様な質問パターン**: 製品、店舗、保証、在庫、FAQなど幅広いトピック
4. **日本語対応の確認**: すべてのファイルで日本語が正しく処理されるか検証

---

## 📂 関連ファイル

- `upload_sample_files.sh`: 一括アップロードスクリプト
- `TEST_QUESTIONS.md`: テスト用質問集（33問）
- `README.md`: このファイル

---

**作成日**: 2026年2月1日
**最終更新**: 2026年2月1日
**作成者**: Claude Code (Anthropic Claude Sonnet 4.5)
